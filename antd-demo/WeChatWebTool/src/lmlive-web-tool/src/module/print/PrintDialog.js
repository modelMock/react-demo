import React, { Component } from 'react';import ReactDOM from 'react-dom';import { Modal } from 'antd';import './PringDialog.less'import PrintContentGenerator from './PrintContentGenerator'import BillService from '../../service/BillService'export default class PrintDialog extends Component {	constructor( props ) {		super( props );	}	state = {		visible: false,	}	print = ()=>{		const { printData, printType } = this.props;		const isBill = printType == 2		let recordIds = isBill ? printData.map(item => item.billSn)						: printData.pages.map(arr => arr.filter(it => !!it.invoiceId)).filter(arr => arr.length >0).map(arr => arr[0].invoiceId)		let findDOMNode = ReactDOM.findDOMNode(this.all2print);		let outerHTML = findDOMNode.outerHTML;		// let formerBodyInnerHtml=window.document.body.innerHTML;		window.document.body.innerHTML=outerHTML; //把需要打印的指定内容赋给body.innerHTML		window.print(); //调用浏览器的打印功能		// window.document.body.innerHTML=formerBodyInnerHtml; // 最后还原页面		BillService.savePrint(recordIds,isBill).then(datas =>{			window.location.reload()//打印完毕之后刷新页面，避免点击无效果		})	}	render() {		const { visible, onClose, printData, printType } = this.props;		const props = {			visible:visible,			onCancel:onClose,			onOk:this.print.bind(this),		}		return (			<div style={{}}>				<Modal width={900} maskClosable={false}							{...props}				>					<div ref={obj=>this.all2print =obj} id={"all2print"} >						{PrintContentGenerator.generate(printType, printData)}					</div>				</Modal>			</div>		);	}}